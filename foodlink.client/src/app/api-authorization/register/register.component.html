<div class="form-container" *ngIf="!signedIn && !registerSucceeded">
  <h2 class="form-title">Create Your Account</h2>
  <div class="form-description">Please create your user account to continue.</div>

  <form class="form" [formGroup]="registerForm" (submit)="register()">
    <!-- Name -->
    <div class="form-group">
      <label for="name">Name*</label>
      <input id="name"
             type="text"
             class="form-control"
             name="name"
             formControlName="name" />
      <div class="error-feedback" *ngIf="registerForm.get('name')?.hasError('required') && registerForm.get('name')?.touched">
        Please enter your name.
      </div>
    </div>

    <!-- Email -->
    <div class="form-group">
      <label for="email">Email*</label>
      <input id="email"
             type="email"
             class="form-control"
             name="email"
             formControlName="email" />
      <div class="error-feedback" *ngIf="registerForm.get('email')?.hasError('required') && registerForm.get('email')?.touched">
        Please enter your email.
      </div>
      <div class="error-feedback" *ngIf="registerForm.get('email')?.hasError('email') && registerForm.get('email')?.touched">
        Please enter a valid email address.
      </div>
    </div>

    <!-- Password -->
    <div class="form-group">
      <label for="password">Password*</label>
      <input id="password"
             type="password"
             class="form-control"
             name="password"
             formControlName="password"
             autocomplete="on" />
      <div class="error-feedback" *ngIf="registerForm.get('password')?.hasError('required') && registerForm.get('password')?.touched">
        Please enter your password.
      </div>
      <div class="error-feedback" *ngIf="registerForm.get('password')?.hasError('minlength') && registerForm.get('password')?.touched">
        Password must be at least 6 characters long.
      </div>
      <div class="error-feedback" *ngIf="registerForm.get('password')?.hasError('pattern') && registerForm.get('password')?.touched">
        Password must include at least one special character.
      </div>
    </div>

    <!-- Confirm Password -->
    <div class="form-group">
      <label for="confirmPassword">Confirm Password*</label>
      <input id="confirmPassword"
             type="password"
             class="form-control"
             name="confirmPassword"
             formControlName="confirmPassword"
             autocomplete="on" />
      <div class="error-feedback" *ngIf="registerForm.hasError('passwordMismatch') && registerForm.get('confirmPassword')?.touched">
        Passwords do not match.
      </div>
    </div>

    <!-- General Error Messages -->
    <div class="form-errors" *ngIf="registerFailed">
      <div class="error-feedback">Registration failed.</div>
      <div class="error-feedback" *ngFor="let error of errors">{{ error }}</div>
    </div>

    <!-- Submit Button -->
    <div class="form-group">
      <button class="btn btn-primary"
              [disabled]="!registerForm.valid"
              type="submit">
        Register
      </button>
    </div>
  </form>
</div>

<div *ngIf="registerSucceeded" class="success-message">
  <h4>Registration succeeded</h4>
  <p>
    Please <a href="signin">sign in</a> to continue.
  </p>
</div>

<div *ngIf="signedIn" class="info-message">
  <h4>Signed in</h4>
  <p>
    Please log out of your current session to create a new user account.
  </p>
</div>
